{"id":"claude-agent-sdk-go-06f","title":"Task7: Close Method with Cleanup","description":"Close with graceful shutdown, temp file cleanup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:58:14.428904+01:00","updated_at":"2025-12-21T14:00:28.614093+01:00","closed_at":"2025-12-21T14:00:28.614093+01:00","close_reason":"Close with graceful shutdown, force kill timeout, temp file cleanup","dependencies":[{"issue_id":"claude-agent-sdk-go-06f","depends_on_id":"claude-agent-sdk-go-53c","type":"blocks","created_at":"2025-12-21T13:58:19.511508+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-0c5","title":"Hook-Specific Output Types - add typed variants per hook event","description":"Go uses generic HookOutput. Python has PreToolUseHookSpecificOutput, PostToolUseHookSpecificOutput, UserPromptSubmitHookSpecificOutput, SessionStartHookSpecificOutput (types.py:241-276).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:54:27.676333+01:00","updated_at":"2025-12-21T23:05:06.900834+01:00","closed_at":"2025-12-21T23:05:06.900834+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-1gf","title":"Task5: Define Options Types","description":"docs/plans/01-types-interfaces.md#task-5-define-options-types-complete","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:15:12.374906+01:00","updated_at":"2025-12-21T13:38:26.311872+01:00","closed_at":"2025-12-21T13:38:26.311872+01:00","close_reason":"Options types with functional options pattern","dependencies":[{"issue_id":"claude-agent-sdk-go-1gf","depends_on_id":"claude-agent-sdk-go-445","type":"blocks","created_at":"2025-12-21T13:16:55.28161+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-2cl","title":"Add SandboxSettings configuration types","description":"Python has SandboxSettings, SandboxNetworkConfig, SandboxIgnoreViolations. Go has none.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:34.501194+01:00","updated_at":"2025-12-22T10:13:59.075611+01:00","closed_at":"2025-12-22T10:13:59.075611+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-2cl","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.515589+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-2i5","title":"Settings/Sandbox Merging - merge sandbox into settings JSON","description":"Go doesn't merge sandbox into settings JSON like Python does. In Python subprocess_cli.py:253-271, sandbox is merged INTO settings. Go passes them separately via --sandbox flag.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T22:54:09.732152+01:00","updated_at":"2025-12-21T23:00:48.520322+01:00","closed_at":"2025-12-21T23:00:48.520322+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-2rv","title":"Example: setting_sources configuration","description":"Add examples/setting-sources/ to demonstrate user/project/local settings control. Python has setting_sources.py showing setting_sources=['user'], ['user','project'], None patterns.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:20:03.661904+01:00","updated_at":"2025-12-21T22:20:03.661904+01:00"}
{"id":"claude-agent-sdk-go-2v2","title":"Permission validation - mutual exclusivity","description":"Python validates that can_use_tool and permission_prompt_tool_name aren't used together. Go lacks this validation. Add check in client initialization.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T23:13:17.489322+01:00","updated_at":"2025-12-21T23:23:33.508741+01:00","closed_at":"2025-12-21T23:23:33.508741+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-2xv","title":"Task1: Message Parser","description":"Create parser.go and parser_test.go with ParseMessage function","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:18:01.830865+01:00","updated_at":"2025-12-21T14:23:09.413968+01:00","closed_at":"2025-12-21T14:23:09.413968+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-445","title":"Task4: Define Message Types","description":"docs/plans/01-types-interfaces.md#task-4-define-message-types","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:15:12.211663+01:00","updated_at":"2025-12-21T13:35:59.695731+01:00","closed_at":"2025-12-21T13:35:59.695731+01:00","close_reason":"Message types implemented with tests"}
{"id":"claude-agent-sdk-go-44q","title":"Plugin Support - add --plugins flag and plugins field","description":"Go SDK missing plugin support. Python has plugins field with plugin directories (subprocess_cli.py:295-300).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:54:26.173019+01:00","updated_at":"2025-12-21T23:05:48.535514+01:00","closed_at":"2025-12-21T23:05:48.535514+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-45a","title":"Add system_prompt example","description":"Python has system_prompt.py example. Go missing equivalent demonstrating system prompt customization.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:44.659121+01:00","updated_at":"2025-12-22T10:12:58.923449+01:00","closed_at":"2025-12-22T10:12:58.923449+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-45a","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.672756+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-46n","title":"WithClient context manager pattern","description":"Enhance WithClient() to provide better resource management similar to Python's async context manager pattern. Ensure proper cleanup on panic.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-21T23:13:18.596665+01:00","updated_at":"2025-12-22T10:01:19.60785+01:00","closed_at":"2025-12-22T10:01:19.60785+01:00","close_reason":"WithClient panic recovery implemented and tested"}
{"id":"claude-agent-sdk-go-52u","title":"Task0: Version Check Pre-Flight","description":"Add CLIVersionError, version parsing, comparison, min version check","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:47:11.367933+01:00","updated_at":"2025-12-21T13:49:10.495613+01:00","closed_at":"2025-12-21T13:49:10.495613+01:00","close_reason":"Version parsing, comparison, and min version check with CLIVersionError"}
{"id":"claude-agent-sdk-go-53c","title":"Task6: TOCTOU-Safe Write Method","description":"Write with mutex serialization for concurrent MCP tool calls","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:58:14.272109+01:00","updated_at":"2025-12-21T13:59:00.379217+01:00","closed_at":"2025-12-21T13:59:00.379217+01:00","close_reason":"TOCTOU-safe Write with mutex serialization for concurrent MCP tool calls"}
{"id":"claude-agent-sdk-go-5au","title":"External MCP server transport integration","description":"Python fully supports stdio/sse/http MCP server transports. Go has types defined but integration with control protocol unclear. Verify and complete integration.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T23:13:17.875252+01:00","updated_at":"2025-12-21T23:23:33.512064+01:00","closed_at":"2025-12-21T23:23:33.512064+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-5cr","title":"HTTP MCP server transport implementation","description":"MCPServerConfig type exists with Type=http but no transport implementation. Need HTTP client with request/response handling for remote MCP servers.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:20:01.004636+01:00","updated_at":"2025-12-21T22:41:24.255216+01:00","closed_at":"2025-12-21T22:41:24.255216+01:00","close_reason":"Already supported - HTTP MCP server configs are passed to CLI via --mcp-config flag. CLI handles the HTTP connection. Added tests to verify."}
{"id":"claude-agent-sdk-go-5xb","title":"Task10: Query MCP Tool Call Handling","description":"Add MCP tool call handling to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:13:49.860472+01:00","updated_at":"2025-12-21T16:22:26.238947+01:00","closed_at":"2025-12-21T16:22:26.238947+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-5xb","depends_on_id":"claude-agent-sdk-go-a48","type":"blocks","created_at":"2025-12-21T16:13:54.317081+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-66b","title":"Add tools_option (allowlist) example","description":"Python has tools_option.py demonstrating tool allowlist filtering. Go missing equivalent.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:45.034926+01:00","updated_at":"2025-12-22T10:13:55.546883+01:00","closed_at":"2025-12-22T10:13:55.546883+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-66b","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.827742+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-6gh","title":"Plan05: Integration \u0026 Examples","description":"docs/plans/05-integration.md - Examples, documentation, integration tests","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T16:49:46.051395+01:00","updated_at":"2025-12-21T17:05:58.294306+01:00","closed_at":"2025-12-21T17:05:58.294306+01:00","close_reason":"Plan05 complete: 12 examples and integration tests created"}
{"id":"claude-agent-sdk-go-6jp","title":"Epic: SDK Feature Parity Gaps","description":"Track all gaps between Go SDK and Python SDK identified in comparison analysis","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T17:40:21.037973+01:00","updated_at":"2025-12-21T22:41:53.210765+01:00","closed_at":"2025-12-21T22:41:53.210765+01:00","close_reason":"Completed: Stream closure coordination, CLI version check, IsError field, buffer overflow errors, MCP image content. SSE/HTTP MCP already supported. P3 examples remaining."}
{"id":"claude-agent-sdk-go-6lm","title":"CLI version check on connect","description":"Python checks CLI version on connect and warns if incompatible. Go has version comparison functions in sdk/version.go but doesn't call them during connection. Should add check in subprocess.Connect().","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T22:19:59.750813+01:00","updated_at":"2025-12-21T22:32:45.263005+01:00","closed_at":"2025-12-21T22:32:45.263005+01:00","close_reason":"Implemented checkCLIVersion in Connect() with 2s timeout, parseVersionOutput, and CLAUDE_AGENT_SDK_SKIP_VERSION_CHECK env var support"}
{"id":"claude-agent-sdk-go-7ie","title":"Fork Session - add --fork-session flag","description":"Go SDK missing --fork-session flag support (Python subprocess_cli.py:277).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:54:26.54203+01:00","updated_at":"2025-12-21T23:05:05.501348+01:00","closed_at":"2025-12-21T23:05:05.501348+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-7q1","title":"Task4: Control Request/Response","description":"Add sendControlRequest and handleControlResponse to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:50.020915+01:00","updated_at":"2025-12-21T15:16:20.863952+01:00","closed_at":"2025-12-21T15:16:20.863952+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-93d","title":"Add hook output detailed types","description":"Python has HookJSONOutput, SyncHookJSONOutput, AsyncHookJSONOutput with typed fields. Go uses generic map[string]any.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T17:40:45.774354+01:00","updated_at":"2025-12-21T17:40:45.774354+01:00","dependencies":[{"issue_id":"claude-agent-sdk-go-93d","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:55.101154+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-97r","title":"Task5: Initialize with Hook Registration","description":"Add Initialize method and hook configuration to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:50.352995+01:00","updated_at":"2025-12-21T15:17:31.927055+01:00","closed_at":"2025-12-21T15:17:31.927055+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-97r","depends_on_id":"claude-agent-sdk-go-7q1","type":"blocks","created_at":"2025-12-21T15:14:56.702027+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-9wf","title":"Restructure: Move from flat root to organized packages","description":"Current: All 27 Go files at root with 'package sdk'. Module is github.com/victorarias/claude-agent-sdk-go but package is 'sdk' - non-idiomatic. Options: (A) Rename module to match package, (B) Create internal/ subdirectories for transport, subprocess, parser, mcp","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:21.466928+01:00","updated_at":"2025-12-21T21:59:56.136276+01:00","closed_at":"2025-12-21T21:59:56.136276+01:00","close_reason":"Completed package restructuring: moved types from sdk/ to types/, updated all references including internal packages, examples, and tests. All tests pass."}
{"id":"claude-agent-sdk-go-9ze","title":"Task8: Stream Input and Message Sending","description":"Add StreamInput, SendMessage, SendUserMessage, SetCanUseTool to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:08:56.934778+01:00","updated_at":"2025-12-21T16:13:43.028597+01:00","closed_at":"2025-12-21T16:13:43.028597+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-9ze","depends_on_id":"claude-agent-sdk-go-cp0","type":"blocks","created_at":"2025-12-21T16:09:04.319636+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-a1i","title":"Stream closure coordination - wait for first result before closing stdin","description":"Python waits for first result before closing stdin when using hooks/MCP. Go is missing this coordination which can break bidirectional control protocol. See query.py stream_input() method.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T22:19:59.364231+01:00","updated_at":"2025-12-21T22:32:45.092556+01:00","closed_at":"2025-12-21T22:32:45.092556+01:00","close_reason":"Implemented StreamInputWithWait with first result coordination, timeout config, and WaitForFirstResult channel"}
{"id":"claude-agent-sdk-go-a48","title":"Task9: MCP Server Support Types","description":"Create mcp.go and mcp_test.go with MCPToolHandler, MCPServer, MCPServerBuilder types","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:13:49.700603+01:00","updated_at":"2025-12-21T16:16:31.14936+01:00","closed_at":"2025-12-21T16:16:31.14936+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-ab1","title":"Environment Precedence - respect user env var ordering","description":"Go doesn't respect user env var precedence. Python properly merges sys env -\u003e user env -\u003e SDK env (subprocess_cli.py:380-389).","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T22:54:27.293831+01:00","updated_at":"2025-12-21T23:05:56.427254+01:00","closed_at":"2025-12-21T23:05:56.427254+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-abr","title":"Plan01: Types \u0026 Interfaces","description":"docs/plans/01-types-interfaces.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T13:00:26.886129+01:00","updated_at":"2025-12-21T13:42:56.791488+01:00","closed_at":"2025-12-21T13:42:56.791488+01:00","close_reason":"All 8 tasks completed: types, options, transport interface with full test coverage"}
{"id":"claude-agent-sdk-go-b2f","title":"Task6: Define Hook Types","description":"docs/plans/01-types-interfaces.md#task-6-define-hook-types-complete","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:15:12.544695+01:00","updated_at":"2025-12-21T13:39:26.719434+01:00","closed_at":"2025-12-21T13:39:26.719434+01:00","close_reason":"Hook types with all 6 events","dependencies":[{"issue_id":"claude-agent-sdk-go-b2f","depends_on_id":"claude-agent-sdk-go-1gf","type":"blocks","created_at":"2025-12-21T13:16:55.440829+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-bfy","title":"Task3: SubprocessTransport Structure","description":"Transport struct with critical fields: writeMu, exitError, tempFiles","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:54:08.730804+01:00","updated_at":"2025-12-21T13:55:32.337237+01:00","closed_at":"2025-12-21T13:55:32.337237+01:00","close_reason":"SubprocessTransport struct with writeMu, exitError, tempFiles"}
{"id":"claude-agent-sdk-go-blx","title":"Add full MCP JSONRPC bridge in Query","description":"Go only handles mcp_tool_call. Missing: tools/list handler, initialize handler for MCP protocol negotiation. Python has 400+ lines of MCP routing logic.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T17:40:33.490971+01:00","updated_at":"2025-12-21T23:18:51.202338+01:00","closed_at":"2025-12-21T23:18:51.202338+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-blx","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.062659+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-bx5","title":"Task6: Interrupt and Control Methods","description":"Add Interrupt, SetPermissionMode, SetModel, RewindFiles to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T15:14:50.683064+01:00","updated_at":"2025-12-21T15:18:44.18302+01:00","closed_at":"2025-12-21T15:18:44.18302+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-bx5","depends_on_id":"claude-agent-sdk-go-97r","type":"blocks","created_at":"2025-12-21T15:14:56.868945+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-c06","title":"Plan04: Client API","description":"docs/plans/04-client-api.md - High-level Client wrapper with hooks, MCP, and session management","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T16:28:12.860291+01:00","updated_at":"2025-12-21T16:47:45.8542+01:00","closed_at":"2025-12-21T16:47:45.8542+01:00","close_reason":"Completed all 8 tasks: Client structure, Connect, Query, QueryStream, Streaming methods, Context manager, Message helpers, Async iterator - 139 tests"}
{"id":"claude-agent-sdk-go-c7q","title":"Command Line Optimization - use temp files for long commands","description":"Go errors on long command lines. Python proactively uses temp files for agents when command is too long (subprocess_cli.py:337-365).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:54:26.933441+01:00","updated_at":"2025-12-21T23:06:57.261369+01:00","closed_at":"2025-12-21T23:06:57.261369+01:00","close_reason":"Already implemented by Agents TDD subagent - includes optimizeCommandLength(), getCmdLength(), and cmdLengthLimit() functions"}
{"id":"claude-agent-sdk-go-cp0","title":"Task7: Hook Callback Handling","description":"Add handleControlRequest, handleHookCallback, handleCanUseTool to query.go","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:08:56.581346+01:00","updated_at":"2025-12-21T16:12:21.669885+01:00","closed_at":"2025-12-21T16:12:21.669885+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-dth","title":"Task1: CLI Discovery with Bundled Support","description":"findCLI function with explicit/bundled/PATH/common locations","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:47:11.544422+01:00","updated_at":"2025-12-21T13:50:33.12383+01:00","closed_at":"2025-12-21T13:50:33.12383+01:00","close_reason":"findCLI with explicit/bundled/PATH/common locations","dependencies":[{"issue_id":"claude-agent-sdk-go-dth","depends_on_id":"claude-agent-sdk-go-52u","type":"blocks","created_at":"2025-12-21T13:48:08.64472+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-dx5","title":"Task3: Query Structure","description":"Create query.go and query_test.go with basic Query structure","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:18:02.563705+01:00","updated_at":"2025-12-21T14:29:09.304306+01:00","closed_at":"2025-12-21T14:29:09.304306+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-dx5","depends_on_id":"claude-agent-sdk-go-x2i","type":"blocks","created_at":"2025-12-21T14:18:09.202144+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-eai","title":"Add comprehensive ClaudeAgentOptions type","description":"Python has ClaudeAgentOptions dataclass with ~30 fields. Go has no equivalent comprehensive options type.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:34.154348+01:00","updated_at":"2025-12-22T10:16:06.394823+01:00","closed_at":"2025-12-22T10:16:06.394823+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-eai","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.364743+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-eel","title":"Complete package restructuring (types/, internal/, sdk/)","description":"Complete the Go package restructuring started in this session.\n\n## Current State\n- types/ package: DONE (builds successfully)\n- internal/subprocess/: DONE (builds successfully)  \n- internal/parser/: DONE (builds successfully)\n- internal/mcp/: DONE (builds successfully)\n- sdk/: PARTIAL (has type conflicts)\n\n## Remaining Work\n1. Update sdk/query.go to import types/ and internal/parser\n2. Update sdk/options.go to re-export from types/ or remove duplicates\n3. Update sdk/types.go to re-export from types/ or remove duplicates\n4. Update sdk/errors.go to re-export from types/ or remove duplicates\n5. Update sdk/mcp.go to use types.MCPServer (methods moved to types/)\n6. Update sdk/transport.go to re-export types.Transport\n7. Fix all type references in sdk/client.go (partially done)\n8. Update all test files in sdk/ to use new imports\n9. Update all test files in internal/ to use new imports\n10. Update examples/ to import from sdk/ and types/\n11. Run full test suite\n12. Update go.mod if needed\n\n## Structure Goal\n```\ntypes/           # Standalone types (no SDK imports) - DONE\ninternal/\n  subprocess/    # SubprocessTransport - DONE\n  parser/        # ParseMessage - DONE\n  mcp/           # MCPHandler, MCPServerTransport, protocol types - DONE\nsdk/             # Public API (imports types/, internal/*)\nexamples/        # Import sdk/ and optionally types/\n```\n\n## Key Files to Update\n- sdk/query.go: Add parser.ParseMessage, types.* for all type refs\n- sdk/client.go: Fix remaining type conflicts (partially done)\n- sdk/options.go: Remove duplicates, re-export from types/\n- sdk/*_test.go: Update imports","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T21:34:06.913086+01:00","updated_at":"2025-12-21T22:20:17.827036+01:00","closed_at":"2025-12-21T22:20:17.827036+01:00","close_reason":"Package restructuring completed in previous session"}
{"id":"claude-agent-sdk-go-fb1","title":"Example: filesystem-based agents","description":"Add examples/filesystem-agents/ to test loading agents from .claude/agents/*.md files. Python has filesystem_agents.py demonstrating this pattern.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:20:05.76673+01:00","updated_at":"2025-12-21T22:20:05.76673+01:00"}
{"id":"claude-agent-sdk-go-fkg","title":"Task8: Stderr Callback Test","description":"Test stderr callback functionality","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:58:14.573686+01:00","updated_at":"2025-12-21T14:01:09.840131+01:00","closed_at":"2025-12-21T14:01:09.840131+01:00","close_reason":"Stderr callback test verifying callback receives stderr lines","dependencies":[{"issue_id":"claude-agent-sdk-go-fkg","depends_on_id":"claude-agent-sdk-go-06f","type":"blocks","created_at":"2025-12-21T13:58:19.655518+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-fna","title":"Task8: Define Transport Interface","description":"docs/plans/01-types-interfaces.md#task-8-define-transport-interface","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:15:12.833004+01:00","updated_at":"2025-12-21T13:42:32.589557+01:00","closed_at":"2025-12-21T13:42:32.589557+01:00","close_reason":"Transport interface with MockTransport and comprehensive tests","dependencies":[{"issue_id":"claude-agent-sdk-go-fna","depends_on_id":"claude-agent-sdk-go-q6r","type":"blocks","created_at":"2025-12-21T13:16:55.74931+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-h2i","title":"Task2: Command Building with Windows Length Handling","description":"buildCommand function with all CLI args","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:47:11.719515+01:00","updated_at":"2025-12-21T13:53:13.431354+01:00","closed_at":"2025-12-21T13:53:13.431354+01:00","close_reason":"buildCommand with all CLI args and Windows length handling","dependencies":[{"issue_id":"claude-agent-sdk-go-h2i","depends_on_id":"claude-agent-sdk-go-dth","type":"blocks","created_at":"2025-12-21T13:48:08.800276+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-h2v","title":"Add IsError field to MCPToolCallResult","description":"Python MCP tool results have isError field for error indication. Go returns Go error but MCPToolResult struct is missing IsError field.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T22:20:02.341661+01:00","updated_at":"2025-12-21T22:39:52.653733+01:00","closed_at":"2025-12-21T22:39:52.653733+01:00","close_reason":"Added IsError field to MCPToolResult with omitempty for proper JSON serialization"}
{"id":"claude-agent-sdk-go-h4o","title":"Session ID auto-extraction from init response","description":"Python auto-extracts session ID from initialize response. Go requires manual handling. Add automatic extraction in client Connect() method.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T23:13:17.135477+01:00","updated_at":"2025-12-21T23:23:33.503852+01:00","closed_at":"2025-12-21T23:23:33.503852+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-h89","title":"Add MCP server config types (Stdio, SSE, HTTP)","description":"Python has McpStdioServerConfig, McpSSEServerConfig, McpHttpServerConfig, McpSdkServerConfig. Go has single MCPServerConfig struct.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T17:40:33.825081+01:00","updated_at":"2025-12-22T10:13:15.715618+01:00","closed_at":"2025-12-22T10:13:15.715618+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-h89","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.217809+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-hq3","title":"Example: system prompt variations","description":"Add examples/system-prompt/ showing string prompt, preset, preset+append variants. Python has system_prompt.py demonstrating all patterns.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:20:04.99682+01:00","updated_at":"2025-12-21T22:20:04.99682+01:00"}
{"id":"claude-agent-sdk-go-ipn","title":"Plan03: Query/Control Protocol","description":"docs/plans/03-query-protocol.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T14:16:33.759986+01:00","updated_at":"2025-12-21T16:22:32.972084+01:00","closed_at":"2025-12-21T16:22:32.972084+01:00","close_reason":"All 10 tasks completed: message parser, mock transport, query structure, control request/response, initialize with hooks, control methods, hook callbacks, stream input, MCP server types, MCP tool calls"}
{"id":"claude-agent-sdk-go-jok","title":"Agents Support - add agents dict for multi-agent workflows","description":"Go SDK missing 'agents' field support. Python has agents dict with dynamic temp file fallback on long command lines (subprocess_cli.py:279-285, 338-365).","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T22:54:10.071122+01:00","updated_at":"2025-12-21T23:00:48.525339+01:00","closed_at":"2025-12-21T23:00:48.525339+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-jrj","title":"Separate MCP Config Types - TypedDict per transport type","description":"Go has single MCPServerConfig struct. Python has separate McpStdioServerConfig, McpSSEServerConfig, McpHttpServerConfig, McpSdkServerConfig TypedDicts (types.py:387-422).","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:54:28.048819+01:00","updated_at":"2025-12-21T23:07:24.716179+01:00","closed_at":"2025-12-21T23:07:24.716179+01:00","close_reason":"Go uses single flexible MCPServerConfig struct with optional fields per transport type - acceptable Go pattern, separate types would add complexity without functional benefit"}
{"id":"claude-agent-sdk-go-jvw","title":"Task5: Message Reading with Speculative JSON","description":"readMessages goroutine with speculative JSON parsing","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:54:09.052873+01:00","updated_at":"2025-12-21T13:57:34.807374+01:00","closed_at":"2025-12-21T13:57:34.807374+01:00","close_reason":"readMessages with speculative JSON parsing and readStderr callback","dependencies":[{"issue_id":"claude-agent-sdk-go-jvw","depends_on_id":"claude-agent-sdk-go-yoe","type":"blocks","created_at":"2025-12-21T13:54:14.130314+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-o5y","title":"Buffer overflow error reporting instead of silent discard","description":"Go silently discards messages when buffer overflows. Python raises explicit SDKJSONDecodeError. Should return error from addLine() and send to errors channel.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T22:20:03.004921+01:00","updated_at":"2025-12-21T22:39:52.810891+01:00","closed_at":"2025-12-21T22:39:52.810891+01:00","close_reason":"Updated jsonAccumulator.addLine to return error on buffer overflow and send to errors channel"}
{"id":"claude-agent-sdk-go-q1y","title":"SSE MCP server transport implementation","description":"MCPServerConfig type exists with Type=sse but no transport implementation. Need HTTP client with SSE support to connect to remote MCP servers via Server-Sent Events.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:20:00.313489+01:00","updated_at":"2025-12-21T22:41:24.129937+01:00","closed_at":"2025-12-21T22:41:24.129937+01:00","close_reason":"Already supported - SSE MCP server configs are passed to CLI via --mcp-config flag. CLI handles the SSE connection. Added tests to verify."}
{"id":"claude-agent-sdk-go-q6r","title":"Task7: Define Control Protocol Types","description":"docs/plans/01-types-interfaces.md#task-7-define-control-protocol-types-complete","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:15:12.686287+01:00","updated_at":"2025-12-21T13:40:30.763825+01:00","closed_at":"2025-12-21T13:40:30.763825+01:00","close_reason":"Control protocol types with permission system","dependencies":[{"issue_id":"claude-agent-sdk-go-q6r","depends_on_id":"claude-agent-sdk-go-b2f","type":"blocks","created_at":"2025-12-21T13:16:55.604126+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-r3n","title":"Control Request Types - add discriminated union types","description":"Go uses generic ControlRequest struct. Python has 7+ specific request types: SDKControlInterruptRequest, SDKControlPermissionRequest, SDKControlInitializeRequest, SDKControlSetPermissionModeRequest, SDKHookCallbackRequest, SDKControlMcpMessageRequest, SDKControlRewindFilesRequest.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T22:54:10.399311+01:00","updated_at":"2025-12-21T22:57:51.867057+01:00","closed_at":"2025-12-21T22:57:51.867057+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-rnb","title":"Task10: Mock CLI Integration Tests","description":"Integration tests with mock CLI for full message flow","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:04:16.909028+01:00","updated_at":"2025-12-21T14:05:49.349649+01:00","closed_at":"2025-12-21T14:05:49.349649+01:00","close_reason":"Mock CLI integration tests for non-streaming and streaming modes","dependencies":[{"issue_id":"claude-agent-sdk-go-rnb","depends_on_id":"claude-agent-sdk-go-z4b","type":"blocks","created_at":"2025-12-21T14:04:21.771049+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-rz8","title":"Type-safe message filtering helpers","description":"Add helper functions for type-safe message filtering: FilterTextBlocks(), FilterToolUseBlocks(), etc. to match Python's type discrimination patterns.","status":"closed","priority":3,"issue_type":"feature","created_at":"2025-12-21T23:13:18.246212+01:00","updated_at":"2025-12-22T09:48:41.506452+01:00","closed_at":"2025-12-22T09:48:41.506452+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-thf","title":"MCP image content type support","description":"MCPContent only has Type and Text fields. Missing Data and MimeType fields for image content. Python has full ImageContent support.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T22:20:01.644006+01:00","updated_at":"2025-12-21T22:39:52.966994+01:00","closed_at":"2025-12-21T22:39:52.966994+01:00","close_reason":"Added Data and MimeType fields to MCPContent for image content support"}
{"id":"claude-agent-sdk-go-ti3","title":"Example: tools configuration","description":"Add examples/tools-config/ to show tools array, empty array, presets. Python has tools_option.py showing tools=['Read','Glob'], tools=[], tools={'type':'preset'}.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T22:20:04.335212+01:00","updated_at":"2025-12-21T22:20:04.335212+01:00"}
{"id":"claude-agent-sdk-go-tv9","title":"Plan06: MCP Server Protocol Types","description":"docs/plans/06-mcp-servers.md - Add JSONRPC protocol types for MCP servers","status":"closed","priority":2,"issue_type":"epic","created_at":"2025-12-21T17:10:08.829956+01:00","updated_at":"2025-12-21T17:19:07.593128+01:00","closed_at":"2025-12-21T17:19:07.593128+01:00","close_reason":"Plan06 completed: MCP Protocol Types, Handler, and Transport implemented"}
{"id":"claude-agent-sdk-go-uo1","title":"Plan02: Transport Layer","description":"docs/plans/02-transport-layer.md","status":"closed","priority":1,"issue_type":"epic","created_at":"2025-12-21T13:47:04.072774+01:00","updated_at":"2025-12-21T14:05:54.654041+01:00","closed_at":"2025-12-21T14:05:54.654041+01:00","close_reason":"All 11 tasks completed: version, CLI discovery, command building, subprocess transport with full test coverage"}
{"id":"claude-agent-sdk-go-vmx","title":"Async Hook Output - add AsyncHookJSONOutput with async_ field","description":"Go missing AsyncHookJSONOutput type with async_ field (Python types.py:286-299). Need async/sync output distinction for hook responses.","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T22:54:10.73319+01:00","updated_at":"2025-12-21T23:00:48.527997+01:00","closed_at":"2025-12-21T23:00:48.527997+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-wfy","title":"Add image content support in MCP results","description":"Python supports TextContent and ImageContent in MCP tool results. Go only supports text.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-21T17:40:45.397665+01:00","updated_at":"2025-12-21T17:40:45.397665+01:00","dependencies":[{"issue_id":"claude-agent-sdk-go-wfy","depends_on_id":"claude-agent-sdk-go-6jp","type":"blocks","created_at":"2025-12-21T17:40:54.961433+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-x2i","title":"Task2: Mock Transport for Testing","description":"Create mock_transport_test.go for testing Query","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:18:02.165827+01:00","updated_at":"2025-12-21T14:23:35.885819+01:00","closed_at":"2025-12-21T14:23:35.885819+01:00","close_reason":"Closed","dependencies":[{"issue_id":"claude-agent-sdk-go-x2i","depends_on_id":"claude-agent-sdk-go-2xv","type":"blocks","created_at":"2025-12-21T14:18:09.033542+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-xek","title":"Task1: Client Structure with Complete Options","description":"Create client.go and client_test.go with Client struct, options, MCP, hooks","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T16:28:18.655837+01:00","updated_at":"2025-12-21T16:47:35.436677+01:00","closed_at":"2025-12-21T16:47:35.436677+01:00","close_reason":"Completed Plan04 Client API implementation with 139 tests passing"}
{"id":"claude-agent-sdk-go-yfe","title":"SessionStartHookSpecificOutput type","description":"Python has SessionStartHookSpecificOutput in HookSpecificOutput union but Go lacks this type. Need to add struct and helper function NewSessionStartOutput() in types/hooks.go","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T23:13:16.731749+01:00","updated_at":"2025-12-21T23:18:51.198417+01:00","closed_at":"2025-12-21T23:18:51.198417+01:00","close_reason":"Closed"}
{"id":"claude-agent-sdk-go-yoe","title":"Task4: Connect Method with Validation","description":"Connect with CLI discovery, command building, pipe setup","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T13:54:08.888147+01:00","updated_at":"2025-12-21T13:56:28.616773+01:00","closed_at":"2025-12-21T13:56:28.616773+01:00","close_reason":"Connect with CLI discovery, command building, pipe setup, environment","dependencies":[{"issue_id":"claude-agent-sdk-go-yoe","depends_on_id":"claude-agent-sdk-go-bfy","type":"blocks","created_at":"2025-12-21T13:54:13.978239+01:00","created_by":"daemon"}]}
{"id":"claude-agent-sdk-go-z4b","title":"Task9: Concurrent Write Race Test","description":"Race condition test for concurrent writes with -race flag","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T14:04:16.733746+01:00","updated_at":"2025-12-21T14:05:03.079139+01:00","closed_at":"2025-12-21T14:05:03.079139+01:00","close_reason":"Concurrent writes race test with 50 writers x 100 writes passes with -race"}
